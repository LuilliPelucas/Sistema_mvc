# .htaccess para URLs Amigables
# Sistema MVC PHP

# Activar el módulo de reescritura
<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Establecer la ruta base (modificar si el sistema está en un subdirectorio)
    RewriteBase /sistema_mvc/
    
    # Si el archivo o directorio existe, no reescribir
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    
    # Reescribir todas las URLs a bootstrap.php?url= (excepto index.php)
    RewriteRule ^(.*)$ bootstrap.php?url=$1 [QSA,L]
</IfModule>

# Prevenir listado de directorios
Options -Indexes

# Configuración de errores personalizados (opcional)
# ErrorDocument 404 /sistema_mvc/error404.php
# ErrorDocument 500 /sistema_mvc/error500.php

# Proteger SOLO archivos de configuración sensibles
# NO bloquear bootstrap.php porque se necesita para el enrutamiento
<FilesMatch "^(config\.php|Database\.php\.jpg)$">
    Order allow,deny
    Deny from all
</FilesMatch>

# Habilitar compresión GZIP (opcional, mejora rendimiento)
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript
</IfModule>

# Establecer caché para archivos estáticos (opcional)
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/jpg "access plus 1 year"
    ExpiresByType image/jpeg "access plus 1 year"
    ExpiresByType image/gif "access plus 1 year"
    ExpiresByType image/png "access plus 1 year"
    ExpiresByType text/css "access plus 1 month"
    ExpiresByType application/javascript "access plus 1 month"
</IfModule>